/*! Staffroller v0.5.0 MIT by Qrac */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var StaffRoller=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);var e={id:"staff",title:"STAFF",data:null,dataFile:null,nameSpace:"staffroller",showAttr:"data-".concat(t.nameSpace||"staffroller","-show"),closeAttr:"data-".concat(t.nameSpace||"staffroller","-close"),modalAttr:"data-".concat(t.nameSpace||"staffroller","-modal")};Object.assign(this,e,t),this.showEls=document.querySelectorAll("[".concat(this.showAttr,"]")),this.init()}return _createClass(a,[{key:"init",value:function(){this.data?this.setData():this.dataFile&&this.setDataFile()}},{key:"setData",value:function(){this.setTemplate(this.data),this.setShow(),this.setClose(),this.setKeydown()}},{key:"setDataFile",value:function(){var e=this;fetch(this.dataFile).then(function(t){return t.json()}).then(function(t){e.setTemplate(t),e.setShow(),e.setClose(),e.setKeydown()})}},{key:"setTemplate",value:function(t){var l="";t.forEach(function(t){var e=t.role,a="";Array.isArray(e)?e.forEach(function(t){a+='<li class="staffroller-role">'.concat(t,"</li>")}):a+='<li class="staffroller-role">'.concat(t.role,"</li>"),a='<dt><ul class="staffroller-roles">'.concat(a,"</ul></dt>");var o=t.members,n="";o.forEach(function(t){var e=t.url?'<p class="staffroller-name"><a href="'.concat(t.url,'" target="_blank" rel="noopener noreferrer" class="staffroller-link">').concat(t.name,"</a></p>"):'<p class="staffroller-name"><span>'.concat(t.name,"</span></p>"),a=t.image?'<img class="staffroller-image" src="'.concat(t.image,'" alt="').concat(t.name,'">'):"";n+='<li class="staffroller-member">'.concat(a).concat(e,"</li>")}),n='<dd><ul class="staffroller-members">'.concat(n,"</ul></dd>"),l=l+a+n}),l='<div class="staffroller-row">'.concat(l,"</div>");var e='\n      <div id="'.concat(this.id,'" ').concat(this.modalAttr,'="').concat(this.id,'" aria-hidden="true" class="staffroller-modal">\n        <div class="staffroller-overlay is-fade"></div>\n        <div class="staffroller-wrapper">\n          <div class="staffroller-container is-fade">\n            <p class="staffroller-title">').concat(this.title,'</p>\n            <dl class="staffroller-content">').concat(l,'</dl>\n          </div>\n          <button type="button" ').concat(this.closeAttr,'="').concat(this.id,'" class="staffroller-close"></button>\n        </div>\n      </div>\n    ');document.querySelector("body").insertAdjacentHTML("beforeend",e)}},{key:"setShow",value:function(){var a=this;this.showEls.forEach(function(t){var e=t.getAttribute(a.showAttr);t.addEventListener("click",function(t){return a.showModal(t,e)})})}},{key:"setClose",value:function(){var a=this;document.querySelectorAll("[".concat(this.closeAttr,'="').concat(this.id,'"]')).forEach(function(t){var e=t.getAttribute(a.closeAttr);t.addEventListener("click",function(t){return a.closeModal(t,e)})})}},{key:"setKeydown",value:function(){var e=this;document.addEventListener("keydown",function(t){return e.onKeydown(t)})}},{key:"showModal",value:function(t,e){t.preventDefault(),document.getElementById(e).setAttribute("aria-hidden","false")}},{key:"closeModal",value:function(t,e){(t.preventDefault(),e)?document.getElementById(e).setAttribute("aria-hidden","true"):document.querySelectorAll("[".concat(this.modalAttr,"]")).forEach(function(t){t.setAttribute("aria-hidden","true")})}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t)}}]),a}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=StaffRoller);
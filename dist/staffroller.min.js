/*! Staffroller v0.2.2 MIT by Qrac */
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var StaffRoller=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);var t={id:"staff",title:"STAFF",data:"",nameSpace:"staffroller",showAttr:"data-".concat(e.nameSpace||"staffroller","-show"),closeAttr:"data-".concat(e.nameSpace||"staffroller","-close"),modalAttr:"data-".concat(e.nameSpace||"staffroller","-modal")};Object.assign(this,t,e),this.showEls=document.querySelectorAll("[".concat(this.showAttr,"]")),this.init()}return _createClass(a,[{key:"init",value:function(){Array.isArray(this.data)&&(this.setData(),this.setShow(),this.setClose(),this.setKeydown())}},{key:"setData",value:function(){var e=document.querySelector("body"),t=document.createDocumentFragment(),a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),l=document.createElement("dl");a.setAttribute("id",this.id),a.setAttribute(this.modalAttr,this.id),a.setAttribute("aria-hidden","true"),a.classList.add("staffroller-modal"),o.classList.add("staffroller-overlay","is-fade"),r.classList.add("staffroller-wrapper"),n.classList.add("staffroller-container","is-fade"),l.classList.add("staffroller-content"),t.appendChild(a),a.appendChild(o),a.appendChild(r),r.appendChild(n),n.appendChild(l),n.insertAdjacentHTML("afterbegin",'<p class="staffroller-title">'.concat(this.title,"</p>")),r.insertAdjacentHTML("beforeend",'<button type="button" '.concat(this.closeAttr,'="').concat(this.id,'" class="staffroller-close"></button>'));var s=this.data,i="";for(var c in s){var d=s[c].role,f="";if(Array.isArray(d))for(var u in d)f+='<li class="staffroller-role">'.concat(d[u],"</li>");else f+='<li class="staffroller-role">'.concat(s[c].role,"</li>");f='<dt><ul class="staffroller-roles">'.concat(f,"</ul></dt>");var h=s[c].name,y="";if(Array.isArray(h))for(var m in h)y+='<li class="staffroller-name">'.concat(h[m],"</li>");else y+='<li class="staffroller-name">'.concat(s[c].name,"</li>");i=i+f+(y='<dd><ul class="staffroller-names">'.concat(y,"</ul></dd>"))}i='<div class="staffroller-row">'.concat(i,"</div>"),l.insertAdjacentHTML("beforeend",i),e.appendChild(t)}},{key:"setShow",value:function(){var a=this;this.showEls.forEach(function(e){var t=e.getAttribute(a.showAttr);e.addEventListener("click",function(e){return a.showModal(e,t)})})}},{key:"setClose",value:function(){var t=this;document.querySelectorAll("[".concat(this.closeAttr,"]")).forEach(function(e){e.addEventListener("click",function(e){return t.closeModal(e)})})}},{key:"setKeydown",value:function(){var t=this;document.addEventListener("keydown",function(e){return t.onKeydown(e)})}},{key:"showModal",value:function(e,t){e.preventDefault(),document.getElementById(t).setAttribute("aria-hidden","false")}},{key:"closeModal",value:function(e){e.preventDefault(),document.querySelectorAll("[".concat(this.modalAttr,"]")).forEach(function(e){e.setAttribute("aria-hidden","true")})}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e)}}]),a}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=StaffRoller);
/*! Staffroller v0.1.0 MIT by Qrac */
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Staffroller=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var t={id:"staffroller-modal",title:"STAFF",data:"",nameSpace:"staffroller",showAttr:"data-".concat(e.nameSpace||"staffroller","-show"),closeAttr:"data-".concat(e.nameSpace||"staffroller","-close"),modalAttr:"data-".concat(e.nameSpace||"staffroller","-modal")};Object.assign(this,t,e),this.showEls=document.querySelectorAll("[".concat(this.showAttr,"]")),this.init()}return _createClass(n,[{key:"init",value:function(){Array.isArray(this.data)&&(this.setStyle(),this.setData(),this.setShow(),this.setClose(),this.setKeydown())}},{key:"setStyle",value:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode('\n      .staffroller-modal[aria-hidden=true] {\n        visibility: hidden;\n      }\n      .staffroller-modal .is-fade {\n        transition: 0.3s cubic-bezier(0, 0, 0.2, 1);\n      }\n      .staffroller-modal[aria-hidden=true] .is-fade {\n        opacity: 0;\n      }\n      .staffroller-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 1000;\n        transition: 0.32s;\n      }\n      .staffroller-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.9);\n        z-index: 1;\n      }\n      .staffroller-close {\n        cursor: pointer;\n        position: fixed;\n        top: 0;\n        right: 0;\n        width: 64px;\n        height: 64px;\n        background: none;\n        border: none;\n        box-shadow: none;\n        opacity: 0.5;\n        z-index: 3;\n      }\n      .staffroller-close:before,\n      .staffroller-close:after {\n        content: "";\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 32px;\n        height: 2px;\n        background: #fff;\n        border-radius: 1px;\n      }\n      .staffroller-close:before {\n        transform: translate(-50%, -50%) rotate(45deg);\n      }\n      .staffroller-close:after {\n        transform: translate(-50%, -50%) rotate(-45deg);\n      }\n      .staffroller-wrapper {\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n        z-index: 2;\n        overflow: hidden;\n      }\n      .staffroller-container {\n        width: 100%;\n        max-height: 100vh;\n        padding: 48px 16px 160px;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n      .staffroller-container:after {\n        content: "";\n        display: block;\n        width: 100%;\n        padding-bottom: constant(safe-area-inset-bottom);\n        padding-bottom: env(safe-area-inset-bottom);\n      }\n      .staffroller-title {\n        padding: 1.25em;\n        color: #fff;\n        font-size: 1.25em;\n        font-weight: 700;\n        text-align: center;\n      }\n      .staffroller-row {\n        display: flex;\n        flex-wrap: wrap;\n      }\n      .staffroller-row > dt,\n      .staffroller-row > dd {\n        flex: 0 0 50%;\n        padding: 0.5em;\n      }\n      .staffroller-role {\n        color: #fff;\n        font-size: 1em;\n        font-weight: 400;\n        text-align: right;\n      }\n      .staffroller-name {\n        color: #fff;\n        font-size: 1em;\n        font-weight: 500;\n        text-align: left;\n      }\n    ')),e.appendChild(t)}},{key:"setData",value:function(){var e=document.getElementsByTagName("body")[0],t=document.createDocumentFragment(),n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),l=document.createElement("dl");n.setAttribute("id",this.id),n.setAttribute("data-".concat(this.nameSpace||"staffroller","-modal"),this.id),n.setAttribute("aria-hidden","true"),n.classList.add("staffroller-modal"),o.classList.add("staffroller-overlay","is-fade"),a.classList.add("staffroller-wrapper"),r.classList.add("staffroller-container","is-fade"),l.classList.add("staffroller-content"),t.appendChild(n),n.appendChild(o),n.appendChild(a),a.appendChild(r),r.appendChild(l),r.insertAdjacentHTML("afterbegin",'<p class="staffroller-title">'.concat(this.title,"</p>")),r.insertAdjacentHTML("beforeend",'<button type="button" '.concat(this.closeAttr,'="').concat(this.id,'" class="staffroller-close"></button>'));var i=this.data,s="";for(var f in i){var c=i[f].role,d="";if(Array.isArray(c))for(var u in c)d+='<li class="staffroller-role">'.concat(c[u],"</li>");else d+='<li class="staffroller-role">'.concat(i[f].role,"</li>");d='<dt><ul class="staffroller-roles">'.concat(d,"</ul></dt>");var h=i[f].name,p="";if(Array.isArray(h))for(var m in h)p+='<li class="staffroller-name">'.concat(h[m],"</li>");else p+='<li class="staffroller-name">'.concat(i[f].name,"</li>");s=s+d+(p='<dd><ul class="staffroller-names">'.concat(p,"</ul></dd>"))}s='<div class="staffroller-row">'.concat(s,"</div>"),l.insertAdjacentHTML("beforeend",s),e.appendChild(t)}},{key:"setShow",value:function(){var n=this;Array.prototype.slice.call(this.showEls).forEach(function(e){var t=e.getAttribute(n.showAttr);e.addEventListener("click",function(e){return n.showModal(e,t)})})}},{key:"setClose",value:function(){var t=this,e=document.querySelectorAll("[".concat(this.closeAttr,"]"));Array.prototype.slice.call(e).forEach(function(e){e.addEventListener("click",function(e){return t.closeModal(e)})})}},{key:"setKeydown",value:function(){var t=this;document.addEventListener("keydown",function(e){return t.onKeydown(e)})}},{key:"showModal",value:function(e,t){e.preventDefault(),document.getElementById(t).setAttribute("aria-hidden","false")}},{key:"closeModal",value:function(e){e.preventDefault();var t=document.querySelectorAll("[".concat(this.modalAttr,"]"));Array.prototype.slice.call(t).forEach(function(e){e.setAttribute("aria-hidden","true")})}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e)}}]),n}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=Staffroller);
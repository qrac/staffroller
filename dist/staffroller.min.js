/*! Staffroller v0.3.0 MIT by Qrac */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var StaffRoller=function(){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,o);var e={id:"staff",title:"STAFF",data:null,dataFile:null,nameSpace:"staffroller",showAttr:"data-".concat(t.nameSpace||"staffroller","-show"),closeAttr:"data-".concat(t.nameSpace||"staffroller","-close"),modalAttr:"data-".concat(t.nameSpace||"staffroller","-modal")};Object.assign(this,e,t),this.showEls=document.querySelectorAll("[".concat(this.showAttr,"]")),this.init()}return _createClass(o,[{key:"init",value:function(){this.data?this.setData():this.dataFile&&this.setDataFile()}},{key:"setData",value:function(){this.setTemplate(this.data),this.setShow(),this.setClose(),this.setKeydown()}},{key:"setDataFile",value:function(){var e=this;fetch(this.dataFile).then(function(t){return t.json()}).then(function(t){e.setTemplate(t),e.setShow(),e.setClose(),e.setKeydown()})}},{key:"setTemplate",value:function(t){var l="";t.forEach(function(t){var e=t.role,o="";Array.isArray(e)?e.forEach(function(t){o+='<li class="staffroller-role">'.concat(t,"</li>")}):o+='<li class="staffroller-role">'.concat(t.role,"</li>"),o='<dt><ul class="staffroller-roles">'.concat(o,"</ul></dt>");var a=t.name,n="";Array.isArray(a)?a.forEach(function(t){n+='<li class="staffroller-name">'.concat(t,"</li>")}):n+='<li class="staffroller-name">'.concat(t.name,"</li>"),n='<dd><ul class="staffroller-names">'.concat(n,"</ul></dd>"),l=l+o+n}),l='<div class="staffroller-row">'.concat(l,"</div>");var e='\n      <div id="'.concat(this.id,'" ').concat(this.modalAttr,'="').concat(this.id,'" aria-hidden="true" class="staffroller-modal">\n        <div class="staffroller-overlay is-fade"></div>\n        <div class="staffroller-wrapper">\n          <div class="staffroller-container is-fade">\n            <p class="staffroller-title">').concat(this.title,'</p>\n            <dl class="staffroller-content">').concat(l,'</dl>\n          </div>\n          <button type="button" ').concat(this.closeAttr,'="').concat(this.id,'" class="staffroller-close"></button>\n        </div>\n      </div>\n    ');document.querySelector("body").insertAdjacentHTML("beforeend",e)}},{key:"setShow",value:function(){var o=this;this.showEls.forEach(function(t){var e=t.getAttribute(o.showAttr);t.addEventListener("click",function(t){return o.showModal(t,e)})})}},{key:"setClose",value:function(){var o=this;document.querySelectorAll("[".concat(this.closeAttr,'="').concat(this.id,'"]')).forEach(function(t){var e=t.getAttribute(o.closeAttr);t.addEventListener("click",function(t){return o.closeModal(t,e)})})}},{key:"setKeydown",value:function(){var e=this;document.addEventListener("keydown",function(t){return e.onKeydown(t)})}},{key:"showModal",value:function(t,e){t.preventDefault(),document.getElementById(e).setAttribute("aria-hidden","false")}},{key:"closeModal",value:function(t,e){(t.preventDefault(),e)?document.getElementById(e).setAttribute("aria-hidden","true"):document.querySelectorAll("[".concat(this.modalAttr,"]")).forEach(function(t){t.setAttribute("aria-hidden","true")})}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t)}}]),o}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=StaffRoller);